function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,c=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw o}}}}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,c=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(s){o=!0,c=s}finally{try{n||null==a.return||a.return()}finally{if(o)throw c}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{EOaC:function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return v})),r.d(t,"c",(function(){return p}));var n=r("2kYt"),o=r("EM62"),c=r("mFH5"),i=r("ZBpG"),a=r("7sjG"),s=r("UkLp");function l(e,t){if(1&e&&o.Tb(0,4),2&e){var r=o.jc();o.qc("ngTemplateOutlet",r.utilityMenuTemplate)}}function d(e,t){1&e&&(o.Xb(0,"ts-icon",5),o.Mc(1,"lock_outline"),o.Wb())}var u=function(e,t,r,n,o,c){return{"c-card--interaction":e,"c-card--centered":t,"c-card--aspect":r,"c-card--disabled":n,"c-card--right-spacing":o,"c-card--flat":c}},f=["*"],h=0,b=function(){var e=function(){function e(){_classCallCheck(this,e),this.uid="ts-card-".concat(h++),this._border="none",this.centeredContent=!1,this.isDisabled=!1,this.flat=!1,this._id=this.uid,this.supportsInteraction=!1,this._theme="primary"}return _createClass(e,[{key:"aspectRatio",set:function(e){var t=parseInt(e.split(":")[0],10),r=parseInt(e.split(":")[1],10);this.aspectRatioPadding="".concat((r/t*100).toFixed(2),"%")}},{key:"border",set:function(e){this._border=e||"none"},get:function(){return this._border}},{key:"id",set:function(e){this._id=e||this.uid},get:function(){return this._id}},{key:"theme",set:function(e){this._theme=e||"primary"},get:function(){return this._theme}},{key:"borderClass",get:function(){return this.border&&"none"!==this.border?"c-card--border-".concat(this.border):""}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Lb({type:e,selectors:[["ts-card"]],hostAttrs:[1,"ts-card"],inputs:{centeredContent:"centeredContent",isDisabled:"isDisabled",flat:"flat",supportsInteraction:"supportsInteraction",aspectRatio:"aspectRatio",border:"border",id:"id",theme:"theme",utilityMenuTemplate:"utilityMenuTemplate"},exportAs:["tsCard"],ngContentSelectors:f,decls:5,vars:18,consts:[[3,"ngClass"],["mat-ripple","",1,"c-card__inner",3,"matRippleDisabled"],[3,"ngTemplateOutlet",4,"ngIf"],["class","c-card__lock qa-card-lock",4,"ngIf"],[3,"ngTemplateOutlet"],[1,"c-card__lock","qa-card-lock"]],template:function(e,t){1&e&&(o.pc(),o.Xb(0,"div",0),o.Xb(1,"div",1),o.oc(2),o.Wb(),o.Kc(3,l,1,1,"ng-container",2),o.Kc(4,d,2,0,"ts-icon",3),o.Wb()),2&e&&(o.Hb("c-card qa-card ",t.borderClass," c-card--",t.theme,""),o.Jc("padding-top",t.aspectRatioPadding),o.qc("ngClass",o.xc(11,u,t.supportsInteraction,t.centeredContent,t.aspectRatioPadding,t.isDisabled,t.utilityMenuTemplate||t.isDisabled,t.flat)),o.Eb("id",t.id),o.Db(1),o.qc("matRippleDisabled",!t.supportsInteraction||t.isDisabled),o.Db(2),o.qc("ngIf",t.utilityMenuTemplate),o.Db(1),o.qc("ngIf",t.isDisabled&&!t.utilityMenuTemplate))},directives:[n.k,c.o,n.m,n.r,i.a],styles:[".ts-card{display:flex;flex-flow:row nowrap}.ts-card :not(.mat-form-field-label-wrapper){box-sizing:border-box}.ts-card h1,.ts-card h2,.ts-card h3,.ts-card h4,.ts-card h5,.ts-card p{margin:unset}.ts-card .c-card{font-family:Roboto,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;letter-spacing:.01em;font-weight:400;background-color:#fafafa;position:relative;transition:height .2s;width:100%}.ts-card .c-card:not(.c-button):not(.c-input):not(.c-select):not(.ts-checkbox){line-height:20px}.ts-card .c-card:not(.c-card--aspect),.ts-card .c-card:not(.c-card--interaction){align-items:stretch;display:flex;flex-direction:row;justify-content:center}.c-card .c-card__inner{min-height:calc(100% - 48px);padding:24px;vertical-align:top;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);position:relative;width:100%}.c-card .c-card__inner .c-card__title{font-family:Roboto,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:20px;font-weight:500;letter-spacing:.005em}.c-card .c-card__inner .c-card__title-accent-border{border-left:2px solid #00538a;padding-left:8px}.c-card .c-card__inner .c-card__title-accent-border[theme=accent]{border-left-color:#2f854d}.c-card .c-card__inner .c-card__title-accent-border[theme=warn]{border-left-color:#c8604d}.c-card--interaction:not(.c-card--disabled) .c-card__inner{min-height:calc(100% - 48px);padding:24px;vertical-align:top;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);transition:box-shadow 250ms cubic-bezier(.4,0,.2,1);cursor:pointer}.c-card--interaction:not(.c-card--disabled) .c-card__inner:hover{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.c-card--interaction:not(.c-card--disabled) .c-card__inner .c-card__title{font-family:Roboto,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:20px;font-weight:500;letter-spacing:.005em}.c-card--centered .c-card__inner{align-items:center;display:flex;justify-content:center}.c-card--aspect .c-card__inner{bottom:0;left:0;position:absolute;right:0;top:0}.c-card--disabled .c-card__inner{opacity:.5}.c-card--disabled .c-menu{opacity:.3;pointer-events:none}.c-card--disabled .c-card__lock{color:#999;position:absolute;right:24px;top:calc(24px - 2px);transform:scale(.7)}.c-card--right-spacing .c-card__inner{padding-right:56px}.c-card--flat>.c-card__inner{border:1px solid #cecdd1;box-shadow:none}.c-card--border-bottom.c-card--primary .c-card__inner{border-bottom:2px solid #00538a}.c-card--border-bottom.c-card--accent .c-card__inner{border-bottom:2px solid #2f854d}.c-card--border-bottom.c-card--warn .c-card__inner{border-bottom:2px solid #c8604d}.c-card--border-left.c-card--primary .c-card__inner{border-left:2px solid #00538a}.c-card--border-left.c-card--accent .c-card__inner{border-left:2px solid #2f854d}.c-card--border-left.c-card--warn .c-card__inner{border-left:2px solid #c8604d}.c-card--border-right.c-card--primary .c-card__inner{border-right:2px solid #00538a}.c-card--border-right.c-card--accent .c-card__inner{border-right:2px solid #2f854d}.c-card--border-right.c-card--warn .c-card__inner{border-right:2px solid #c8604d}.c-card--border-top.c-card--primary .c-card__inner{border-top:2px solid #00538a}.c-card--border-top.c-card--accent .c-card__inner{border-top:2px solid #2f854d}.c-card--border-top.c-card--warn .c-card__inner{border-top:2px solid #c8604d}.c-card__inner .ts-table~.ts-loading-overlay .c-loading-overlay{left:-24px;right:-24px}"],encapsulation:2,changeDetection:0}),e}(),p=function(){var e=function(){function e(t){if(_classCallCheck(this,e),this.theme="primary",this.tsCardTitle="c-card__title",!(t instanceof b)&&Object(o.X)())throw new s.c("The 'tsCardTitle' directive must be inside a <ts-card> component.")}return _createClass(e,[{key:"tsTitleAccentBorder",set:function(e){Object(a.b)(e)&&(this.tsCardTitle="".concat(this.tsCardTitle," c-card__title-accent-border"))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Rb(b,13))},e.\u0275dir=o.Mb({type:e,selectors:[["","tsCardTitle",""]],hostVars:2,hostBindings:function(e,t){2&e&&o.Fb(t.tsCardTitle)},inputs:{theme:"theme",tsTitleAccentBorder:"tsTitleAccentBorder"}}),e}(),v=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},imports:[[n.c,c.p,i.b]]}),e}()},iRLe:function(e,t,r){"use strict";r.r(t),r.d(t,"CSVEntryModule",(function(){return G}));var n=r("2kYt"),o=r("nIj0"),c=r("EOaC"),i=r("EM62"),a=r("40Bj"),s=r("2u5E"),l=r("ZBpG"),d=r("EsJc"),u=r("KJBv"),f=r("7sjG"),h=r("HRj5"),b=r("0Bg5"),p=r("UkLp"),v=r("mWib"),y=r("AW5y"),m=r("qFEQ");function g(e,t){if(1&e&&(i.Xb(0,"div",23),i.Xb(1,"span",22),i.Mc(2),i.Wb(),i.Wb()),2&e){var r=t.$implicit,n=t.index;i.Ib("c-csv-entry__column-id--invalid",r.invalid),i.Eb("id","csv-row-id-"+(n+1)),i.Db(2),i.Oc(" ",(null==r.controls||null==r.controls.recordId?null:r.controls.recordId.value)-0+1," ")}}function _(e,t){if(1&e){var r=i.Yb();i.Xb(0,"input",24),i.fc("paste",(function(e){return i.Dc(r),i.jc().onPaste(e,!0)}))("keydown.enter",(function(){i.Dc(r);var e=t.index,n=i.jc();return n.selectCellInNextRow(n.createId(-1,e))}))("keydown.tab",(function(e){i.Dc(r);var n=t.index,o=i.jc();return o.selectAdjacentCell(e,o.createId(-1,n))}))("keydown.shift.tab",(function(e){i.Dc(r);var n=t.index,o=i.jc();return o.selectAdjacentCell(e,o.createId(-1,n),!0)})),i.Wb()}if(2&e){var n=t.index,o=i.jc();i.sc("title","Header, Column: ",o.getHeaderCellName(n)||n+1,""),i.qc("readonly",o.columnHeaders&&o.columnHeaders[n])("formControlName",n),i.Eb("id",o.createId(-1,n))}}function w(e,t){if(1&e){var r=i.Yb();i.Xb(0,"input",28),i.fc("paste",(function(e){return i.Dc(r),i.jc(2).onPaste(e)}))("keydown.enter",(function(){i.Dc(r);var e=t.index,n=i.jc().index,o=i.jc();return o.selectCellInNextRow(o.createId(n,e))}))("keydown.shift.enter",(function(){i.Dc(r);var e=t.index,n=i.jc().index,o=i.jc();return o.selectCellInNextRow(o.createId(n,e),!0)}))("keyup",(function(){return i.Dc(r),i.jc(2).updateErrors()}))("keydown.tab",(function(e){i.Dc(r);var n=t.index,o=i.jc().index,c=i.jc();return c.selectAdjacentCell(e,c.createId(o,n))}))("keydown.shift.tab",(function(e){i.Dc(r);var n=t.index,o=i.jc().index,c=i.jc();return c.selectAdjacentCell(e,c.createId(o,n),!0)})),i.Wb()}if(2&e){var n=t.$implicit,o=t.index,c=i.jc(),a=c.$implicit,s=c.index,l=i.jc();i.Ib("c-csv-entry__input--invalid",n.invalid),i.tc("title","Row: ",(null==a.controls||null==a.controls.recordId?null:a.controls.recordId.value)+1,", Column: ",l.getHeaderCellName(o)||o+1,""),i.qc("formControlName",o),i.Eb("id",l.createId(s,o))}}function x(e,t){if(1&e&&(i.Xb(0,"div",25),i.Xb(1,"div",26),i.Kc(2,w,1,6,"input",27),i.Wb(),i.Wb()),2&e){var r,n=t.$implicit,o=t.index,c=null==(r=i.jc().getColumns(n))?null:r.controls;i.qc("formGroupName",o),i.Db(2),i.qc("ngForOf",c)}}function C(e,t){if(1&e){var r=i.Yb();i.Xb(0,"ts-icon-button",29),i.fc("click",(function(){i.Dc(r);var e=t.index;return i.jc().deleteRow(e)})),i.Mc(1,"delete_forever"),i.Wb()}if(2&e){var n=t.index;i.Eb("id","csv-delete-"+(n+1))("title","Delete row "+(n+1))}}function k(e,t){1&e&&i.Sb(0,"div",30),2&e&&i.qc("innerHTML",t.$implicit,i.Ec)}function R(e,t){if(1&e&&(i.Xb(0,"div",31),i.Mc(1),i.Wb()),2&e){var r=i.jc();i.Db(1),i.Nc(r.tooManyRowsMessage)}}var D,I,j,W,A,O,H=["*"],X=0,F=((j=D=function(){function e(t,r,n){_classCallCheck(this,e),this.formBuilder=t,this.changeDetectorRef=r,this.documentService=n,this.originalColumnCount=2,this.uid="ts-csv-entry-".concat(X++),this.fakeRowHeight="35px",this.layoutGap=b.a.small[0],this.tooManyRowsMessage=null,this.records=[],this.recordsForm=this.formBuilder.group({headers:this.formBuilder.array([]),records:this.formBuilder.array([])}),this.allErrors=null,this._columnCount=2,this._columnValidators=[],this.footerDirection="ltr",this.fullWidth=!1,this._id=this.uid,this._maxRows=2e3,this.outputFormat="tsv",this._rowCount=4,this.blobGenerated=new i.o}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.addRows(this.rowCount,this.columnCount),this.addHeaders(this.columnCount,this.columnHeaders),this.originalColumnCount=this.columnCount,this.recordsForm.valueChanges.pipe(Object(v.a)(1),Object(h.j)(this)).subscribe((function(t){var r=e.generateBlob(t);e.blobGenerated.emit(r)}))}},{key:"ngOnDestroy",value:function(){}},{key:"addRows",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.columnCount,arguments.length>2?arguments[2]:void 0),r=arguments.length>3?arguments[3]:void 0;if(this.rows.length+e>this.maxRows){var n=(1===e?2:e)-(this.rows.length+e-this.maxRows);this.tooManyRowsMessage="Adding ".concat(n," row").concat(n>1?"s":""," would exceed the maximum rows allowed (").concat(this.maxRows,").")}else{this.tooManyRowsMessage&&(this.tooManyRowsMessage=null);for(var o=0;o<e;o+=1){var c=(void 0===r?this.rowCount:r)+o,i=this.createRow(this.rows.length,t?t[o]:null);void 0!==r&&r>=0?this.rows.insert(c,i):this.rows.push(i)}}}},{key:"getColumns",value:function(e){return e.get("columns")}},{key:"updateAllRowIds",value:function(){for(var e=0;e<this.rows.length;e+=1){var t=this.rows.controls[e];t&&t.controls.recordId.setValue(e)}}},{key:"onPaste",value:function(e,t){var r,n=null===(r=e.clipboardData)||void 0===r?void 0:r.getData("Text");if(n&&!(n.indexOf("\n")<0&&n.indexOf("\t")<0)){t=Object(f.b)(t);var o=parseInt(e.target.id.split("X")[0].split("_")[2],10),c=D.splitContent(n,t),i=c.rows.length;if(t)this.clearAllRows(),this.clearHeaderCells(),this.addHeaders(c.headers.length,this.columnHeaders||c.headers),this.columnCount=c.headers.length,this.addRows(i,c.headers.length,c.rows);else{var a=c.rows[0].length;a>this.columnCount&&(D.addColumnsToRows(this.rows,this.headerCells,a-this.columnCount),this.columnCount=a),this.deleteRow(o),this.addRows(i,c.rows.length,c.rows,o)}this.updateAllRowIds(),this.updateErrors(),this.changeDetectorRef.detectChanges()}}},{key:"updateErrors",value:function(){this.allErrors=this.collectErrors()}},{key:"getHeaderCellName",value:function(e){return this.headerCells&&this.headerCells.controls[e]?this.headerCells.controls[e].value:""}},{key:"onScroll",value:function(e){if(e){var t=e.deltaX<0?"right":"left",r=e.target;if(r){var n=r.form.scrollWidth-(parseInt(r.form.offsetWidth,10)+2)-r.form.scrollLeft;0!==e.deltaX&&("right"===t&&r.form.scrollLeft<1||"left"===t&&n<1)&&e.preventDefault()}}}},{key:"selectCellInNextRow",value:function(e,t){if(e){var r=_slicedToArray(e.split("X"),2),n=r[0],o=r[1],c=n.split("_")[2],i=o.split("_")[1],a="".concat(this.uid,"_r_").concat(parseInt(c,10)+(t?-1:1),"Xc_").concat(i),s=this.documentService.document.querySelector("#".concat(a));s?s.focus():(this.addRows(),this.changeDetectorRef.detectChanges(),this.selectCellInNextRow(e))}}},{key:"selectAdjacentCell",value:function(e,t,r){e.preventDefault(),r=Object(f.b)(r);var n,o=_slicedToArray(t.split("X"),2),c=o[0],i=o[1],a=parseInt(c.split("_")[2],10),s=parseInt(i.split("_")[1],10),l=a;r?0===s?(n=this.columnCount-1,l+=-1):n=s-1:s===this.columnCount-1?(n=0,l+=1):n=s+1;var d=this.documentService.document.querySelector("#".concat("".concat(this.uid,"_r_").concat(l,"Xc_").concat(n)));d&&d.focus()}},{key:"createId",value:function(e,t){return"".concat(this.uid,"_r_").concat(e,"Xc_").concat(t)}},{key:"collectErrors",value:function(){var e=this.recordsForm.get("records");if(e){var t=this.getFormErrors(e);return t?Object.keys(t).map((function(e){return _defineProperty({control:e},e,t[e].filter((function(e,t,r){return r.indexOf(e)===t})))})):null}return null}},{key:"deleteRow",value:function(e){null==e||e<0||(this.rows.removeAt(e),this.updateAllRowIds(),this.updateErrors())}},{key:"resetTable",value:function(){this.clearAllRows(),this.clearHeaderCells(),this.columnCount=this.originalColumnCount,this.addRows(this.rowCount,this.columnCount),this.addHeaders(this.columnCount,this.columnHeaders),this.allErrors=null}},{key:"getFormErrors",value:function(e){var t={};return this.getAllErrors(e,t),t}},{key:"getAllErrors",value:function(e,t){for(var r=Object.keys(e.controls),n=0;n<r.length;n+=1){var c=e.get(r[n]);if(c){var i=c instanceof o.j||c instanceof o.d?this.getAllErrors(c,t):c.errors;if(i)for(var a=c.parent.parent.controls,s=a.recordId?a.recordId.value:void 0,l=Object.keys(i),d=0;d<l.length;d+=1){var u=l[d],f=i[l[d]];"boolean"==typeof f&&(f={valid:!1}),void 0!==s&&(f.rowId=s),t[u]?t[u].push(f):t[u]=[f]}}}}},{key:"clearAllRows",value:function(){this.recordsForm.setControl("records",this.formBuilder.array([]))}},{key:"clearHeaderCells",value:function(){this.recordsForm.setControl("headers",this.formBuilder.array([]))}},{key:"addHeaders",value:function(e,t){for(var r=0;r<e;r+=1){var n=t&&t[r]?t[r]:null,c=n?new o.g(n):new o.g;this.headerCells.setControl(r,c)}}},{key:"createRow",value:function(e,t){return this.formBuilder.group({recordId:new o.g(e),columns:this.formBuilder.array(this.createColumns(this.columnCount,t))})}},{key:"createColumns",value:function(e,t){for(var r=[],n=0;n<e;n+=1){var c=t&&t[n]?t[n]:null;c&&(c=Object(p.e)(c)),r.push(new o.g(c,this.columnValidators?this.columnValidators[n]:null))}return r}},{key:"generateBlob",value:function(e){var t="data:text/csv;charset=utf-8,"+"".concat(e.headers.join("\t"),"\r\n")+"".concat(e.records.map((function(e){return e.columns.map((function(e){return e?'"'.concat(e.replace(/"/g,'""'),'"'):""})).join("\t")})).join("\r\n"),"\r\n");return"csv"===this.outputFormat&&(t=JSON.stringify(t).replace(/\\t/g,",")),new Blob([t],{type:"text/csv"})}},{key:"headerCells",get:function(){return this.recordsForm.get("headers")}},{key:"rows",get:function(){return this.recordsForm.get("records")}},{key:"columnCount",set:function(e){this._columnCount=Object(f.d)(e,2)},get:function(){return this._columnCount}},{key:"columnHeaders",set:function(e){this._columnHeaders=e,this.clearHeaderCells(),this.addHeaders(this.columnCount,this.columnHeaders)},get:function(){return this._columnHeaders}},{key:"columnValidators",set:function(e){e&&(this._columnValidators=e)},get:function(){return this._columnValidators}},{key:"id",set:function(e){this._id=e||this.uid},get:function(){return this._id}},{key:"maxRows",set:function(e){this._maxRows=Object(f.d)(e,2e3)},get:function(){return this._maxRows}},{key:"rowCount",set:function(e){this._rowCount=Object(f.d)(e,4)},get:function(){return this._rowCount}},{key:"validationMessages",get:function(){if(this.allErrors){var e,t=[],r=_createForOfIteratorHelper(this.allErrors);try{for(r.s();!(e=r.n()).done;){var n,o=e.value,c=o.control,i=_createForOfIteratorHelper(o[c]);try{for(i.s();!(n=i.n()).done;){var a=n.value,s="";s+="<b>Row ".concat(parseInt(a.rowId,10)+1,":</b> "),"url"===c&&(s+='"'.concat(a.actual.length>20?"".concat(a.actual.slice(0,20),"..."):a.actual,'" is not a valid URL.')),"required"===c&&(s+="Content is required."),t.push(s)}}catch(d){i.e(d)}finally{i.f()}}}catch(d){r.e(d)}finally{r.f()}if(t.length>6){var l=t.length-6;t.length=6,t.push("and ".concat(l," more errors..."))}return t.length>0?t:void 0}}}],[{key:"addColumnsToRows",value:function(e,t,r){for(var n=0;n<e.length;n+=1){var c=e.controls[n];if(c)for(var i=c.controls.columns,a=0;a<r;a+=1)i.controls.push(new o.g)}for(var s=0;s<r;s+=1)t.controls.push(new o.g)}},{key:"splitContent",value:function(e,t){var r={headers:void 0,rows:void 0},n=e.split("\n");return t?(r.headers=n[0].split("\t"),r.rows=n.slice(1,n.length).map((function(e){return e.split("\t")}))):r.rows=n.slice(0,n.length).map((function(e){return e.split("\t")})),r}}]),e}()).\u0275fac=function(e){return new(e||j)(i.Rb(o.f),i.Rb(i.h),i.Rb(y.a))},j.\u0275cmp=i.Lb({type:j,selectors:[["ts-csv-entry"]],hostAttrs:[1,"ts-csv-entry"],hostVars:3,hostBindings:function(e,t){2&e&&(i.Eb("id",t.id),i.Ib("c-csv-entry--full-width",t.fullWidth))},inputs:{footerDirection:"footerDirection",fullWidth:"fullWidth",outputFormat:"outputFormat",columnCount:"columnCount",columnHeaders:"columnHeaders",columnValidators:"columnValidators",id:"id",maxRows:"maxRows",rowCount:"rowCount"},outputs:{blobGenerated:"blobGenerated"},exportAs:["tsCSVEntry"],ngContentSelectors:H,decls:32,vars:18,consts:[[1,"c-csv-entry","qa-csv-entry"],[1,"c-csv-entry__info","qa-csv-entry-info"],[1,"c-csv-entry__scroll"],["fxLayout","row"],["fxLayout","column"],["fxFlex","0 0 auto"],["class","c-csv-entry__column-id","fxFlex","0 0 auto","fxLayout","row","fxLayoutAlign","center center",3,"c-csv-entry__column-id--invalid",4,"ngFor","ngForOf"],["fxFlex","",1,"c-csv-entry__form",3,"formGroup","mousewheel"],["form",""],["formArrayName","headers",1,"c-csv-entry__row","c-csv-entry__row--header","qa-csv-entry-header-row"],["class","c-csv-entry__input c-csv-entry__input--header qa-csv-entry-header-cell","type","text",3,"title","readonly","formControlName","paste","keydown.enter","keydown.tab","keydown.shift.tab",4,"ngFor","ngForOf"],["formArrayName","records"],["class","c-csv-entry__row qa-csv-entry-row",3,"formGroupName",4,"ngFor","ngForOf"],["class","c-csv-entry__delete qa-csv-entry-delete","fxFlex","noshrink",3,"click",4,"ngFor","ngForOf"],["fxLayout","column","fxLayoutAlign","start stretch",1,"c-csv-entry__messages",3,"fxLayoutGap"],["fxLayout","column","fxLayoutAlign","center end"],["class","c-csv-entry__message qa-csv-entry-message",3,"innerHTML",4,"ngFor","ngForOf"],["class","c-csv-entry__message qa-csv-entry-message",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center",3,"dir","fxLayoutGap"],["dir","ltr","fxLayoutGap","1em"],["id","ts-csv-reset","format","hollow","theme","warn",1,"qa-csv-entry-reset",3,"clicked"],["id","ts-csv-add-row","format","hollow",1,"qa-csv-entry-add-row",3,"clicked"],["fxFlex",""],["fxFlex","0 0 auto","fxLayout","row","fxLayoutAlign","center center",1,"c-csv-entry__column-id"],["type","text",1,"c-csv-entry__input","c-csv-entry__input--header","qa-csv-entry-header-cell",3,"title","readonly","formControlName","paste","keydown.enter","keydown.tab","keydown.shift.tab"],[1,"c-csv-entry__row","qa-csv-entry-row",3,"formGroupName"],["formArrayName","columns"],["class","c-csv-entry__input qa-csv-entry-cell","type","text",3,"c-csv-entry__input--invalid","title","formControlName","paste","keydown.enter","keydown.shift.enter","keyup","keydown.tab","keydown.shift.tab",4,"ngFor","ngForOf"],["type","text",1,"c-csv-entry__input","qa-csv-entry-cell",3,"title","formControlName","paste","keydown.enter","keydown.shift.enter","keyup","keydown.tab","keydown.shift.tab"],["fxFlex","noshrink",1,"c-csv-entry__delete","qa-csv-entry-delete",3,"click"],[1,"c-csv-entry__message","qa-csv-entry-message",3,"innerHTML"],[1,"c-csv-entry__message","qa-csv-entry-message"]],template:function(e,t){1&e&&(i.pc(),i.Xb(0,"div",0),i.Xb(1,"div",1),i.Mc(2),i.Sb(3,"br"),i.Mc(4),i.Wb(),i.Xb(5,"div",2),i.Xb(6,"div",3),i.Xb(7,"div",4),i.Sb(8,"div",5),i.Kc(9,g,3,4,"div",6),i.Wb(),i.Xb(10,"form",7,8),i.fc("mousewheel",(function(e){return t.onScroll(e)})),i.Xb(12,"div",9),i.Kc(13,_,1,4,"input",10),i.Wb(),i.Xb(14,"div",11),i.Kc(15,x,3,2,"div",12),i.Wb(),i.Wb(),i.Xb(16,"div",4),i.Sb(17,"div",5),i.Kc(18,C,2,2,"ts-icon-button",13),i.Wb(),i.Wb(),i.Wb(),i.Xb(19,"div",14),i.Xb(20,"div",15),i.Kc(21,k,1,1,"div",16),i.Kc(22,R,2,1,"div",17),i.Wb(),i.Xb(23,"div",18),i.Xb(24,"div",19),i.Xb(25,"ts-button",20),i.fc("clicked",(function(){return t.resetTable()})),i.Mc(26,"Reset Table"),i.Wb(),i.Xb(27,"ts-button",21),i.fc("clicked",(function(){return t.addRows()})),i.Mc(28,"Add Row"),i.Wb(),i.Wb(),i.Sb(29,"span",22),i.Xb(30,"div"),i.oc(31),i.Wb(),i.Wb(),i.Wb(),i.Wb()),2&e&&(i.Db(2),i.Pc(" ",t.rows.length," row",1===t.rows.length?"":"s"," "),i.Db(2),i.Pc(" ",t.columnCount," column",1===t.columnCount?"":"s"," "),i.Db(4),i.Jc("height",t.fakeRowHeight),i.Db(1),i.qc("ngForOf",null==t.rows?null:t.rows.controls),i.Db(1),i.qc("formGroup",t.recordsForm),i.Db(3),i.qc("ngForOf",null==t.headerCells?null:t.headerCells.controls),i.Db(2),i.qc("ngForOf",null==t.rows?null:t.rows.controls),i.Db(2),i.Jc("height",t.fakeRowHeight),i.Db(1),i.qc("ngForOf",null==t.rows?null:t.rows.controls),i.Db(1),i.qc("fxLayoutGap",t.layoutGap),i.Db(2),i.qc("ngForOf",t.validationMessages),i.Db(1),i.qc("ngIf",t.tooManyRowsMessage),i.Db(1),i.qc("dir",t.footerDirection)("fxLayoutGap",t.layoutGap))},directives:[m.d,m.b,n.l,o.D,o.r,o.k,o.e,m.c,m.e,n.m,s.a,o.c,o.q,o.i,o.l,d.a],styles:[".ts-csv-entry{display:inline-block;font-size:16px;max-width:100%}.ts-csv-entry.c-csv-entry--full-width{display:block;width:100%}.ts-csv-entry.c-csv-entry--full-width .c-csv-entry__row{display:block}.ts-csv-entry.c-csv-entry--full-width .c-csv-entry__input{width:100%}.c-csv-entry{--csv-row-height:39px;--csv-cell-padding:8px;--csv-external-row-height:35px}.c-csv-entry .c-csv-entry__scroll{max-height:28.5em;overflow-x:-moz-hidden-unscrollable;overflow-y:auto}.c-csv-entry .c-csv-entry__info{font-family:Roboto,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;letter-spacing:.02em;line-height:1.2em;margin-bottom:4px;margin-right:40px;text-align:right}.c-csv-entry .c-csv-entry__form{border:1px solid #cecdd1;overflow-x:auto}.c-csv-entry .c-csv-entry__row{display:table-row;white-space:nowrap}.c-csv-entry .c-csv-entry__input{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;border:1px solid #cecdd1;display:table-cell;font-size:inherit;min-width:72px;padding:var(--csv-cell-padding)}.c-csv-entry .c-csv-entry__input+.c-csv-entry__input{border-left-width:0}.c-csv-entry .c-csv-entry__input:first-of-type{border-left:0}.c-csv-entry .c-csv-entry__input:last-of-type{border-right:0}.c-csv-entry .c-csv-entry__input:focus{background-color:#d3eaf9}.c-csv-entry .c-csv-entry__input--header{border-bottom-width:3px;border-top:0}.c-csv-entry .c-csv-entry__input--invalid{color:#c8604d}.c-csv-entry .c-csv-entry__delete{max-height:var(--csv-external-row-height)}.c-csv-entry .c-csv-entry__delete .ts-icon-button{color:#cecdd1}.c-csv-entry .c-csv-entry__column-id{font-family:Roboto,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;letter-spacing:.02em;color:#cecdd1;max-height:var(--csv-external-row-height);padding:var(--csv-cell-padding)}.c-csv-entry .c-csv-entry__column-id--invalid{color:#c8604d;font-weight:400}.c-csv-entry .c-csv-entry__messages{font-family:Roboto,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:75%;font-weight:400;letter-spacing:.01em;color:#c8604d;line-height:1.2em;margin-left:15px;margin-right:40px;padding-top:4px}.c-csv-entry__row:not(.c-csv-entry__row--header):not(:last-child) .c-csv-entry__input{border-bottom-width:0}"],encapsulation:2,changeDetection:0}),j),M=((I=function e(){_classCallCheck(this,e)}).\u0275mod=i.Pb({type:I}),I.\u0275inj=i.Ob({factory:function(e){return new(e||I)},imports:[[n.c,a.a,o.y,s.b,d.b,l.b,u.b]]}),I),q=r("l50I"),T=r("sEIs"),E=function(){return["foo","bar"]},L=function(){return["Full Width"]},S=[{path:"",component:(W=function(){function e(t){_classCallCheck(this,e),this.validatorsService=t,this.validators=[o.B.required,this.validatorsService.url()],this.footerDirection="ltr"}return _createClass(e,[{key:"file",value:function(e){console.log("DEMO: Got file from CSV entry: ",e),this.blob=e}},{key:"generateFile",value:function(){this.myFile=new File([this.blob],"testCsv"),function(e,t){if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(e,"test");else{var r=document.createElement("a");document.body.appendChild(r);var n=window.URL.createObjectURL(e);r.href=n,r.download="test",r.click(),setTimeout((function(){window.URL.revokeObjectURL(n),document.body.removeChild(r)}),0)}}(this.blob)}}]),e}(),W.\u0275fac=function(e){return new(e||W)(i.Rb(q.b))},W.\u0275cmp=i.Lb({type:W,selectors:[["demo-csv-entry"]],decls:25,vars:10,consts:[["tsVerticalSpacing",""],["type","radio","name","direction","value","ltr",3,"ngModel","ngModelChange"],["type","radio","name","direction","value","rtl",3,"ngModel","ngModelChange"],["tsVerticalSpacing","",2,"max-width","80%"],[3,"columnValidators","columnHeaders","footerDirection","blobGenerated"],[3,"click"],["fxLayout","row"],["columnCount","1",3,"columnValidators","columnHeaders","fullWidth","blobGenerated"]],template:function(e,t){1&e&&(i.Xb(0,"ts-card",0),i.Xb(1,"h3",0),i.Mc(2,"CSV Entry"),i.Wb(),i.Xb(3,"div"),i.Mc(4," Footer direction: "),i.Xb(5,"ul"),i.Xb(6,"li"),i.Xb(7,"label"),i.Mc(8," ltr "),i.Xb(9,"input",1),i.fc("ngModelChange",(function(e){return t.footerDirection=e})),i.Wb(),i.Wb(),i.Wb(),i.Xb(10,"li"),i.Xb(11,"label"),i.Mc(12," rtl "),i.Xb(13,"input",2),i.fc("ngModelChange",(function(e){return t.footerDirection=e})),i.Wb(),i.Wb(),i.Wb(),i.Wb(),i.Wb(),i.Xb(14,"div",3),i.Xb(15,"ts-csv-entry",4),i.fc("blobGenerated",(function(e){return t.file(e)})),i.Xb(16,"button"),i.Mc(17,"My Custom Content!"),i.Wb(),i.Wb(),i.Wb(),i.Xb(18,"button",5),i.fc("click",(function(){return t.generateFile()})),i.Mc(19,"Generate file & download"),i.Wb(),i.Wb(),i.Xb(20,"ts-card",0),i.Xb(21,"h3",0),i.Mc(22,"CSV Full Width Entry"),i.Wb(),i.Xb(23,"div",6),i.Xb(24,"ts-csv-entry",7),i.fc("blobGenerated",(function(e){return t.file(e)})),i.Wb(),i.Wb(),i.Wb()),2&e&&(i.Db(9),i.qc("ngModel",t.footerDirection),i.Db(4),i.qc("ngModel",t.footerDirection),i.Db(2),i.qc("columnValidators",t.validators)("columnHeaders",i.uc(8,E))("footerDirection",t.footerDirection),i.Db(9),i.qc("columnValidators",t.validators)("columnHeaders",i.uc(9,L))("fullWidth",!0))},directives:[c.a,b.c,o.x,o.c,o.q,o.t,F],encapsulation:2}),W)}],N=((O=function e(){_classCallCheck(this,e)}).\u0275mod=i.Pb({type:O}),O.\u0275inj=i.Ob({factory:function(e){return new(e||O)},imports:[[T.f.forChild(S)],T.f]}),O),G=((A=function e(){_classCallCheck(this,e)}).\u0275mod=i.Pb({type:A}),A.\u0275inj=i.Ob({factory:function(e){return new(e||A)},imports:[[n.c,N,o.m,c.b,M,b.b,q.a]]}),A)}}]);