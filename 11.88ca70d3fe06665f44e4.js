(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"9k2g":function(e,t,i){"use strict";i.d(t,"j",function(){return n}),i.d(t,"d",function(){return o}),i.d(t,"e",function(){return s}),i.d(t,"i",function(){return r}),i.d(t,"c",function(){return l}),i.d(t,"f",function(){return a}),i.d(t,"g",function(){return c}),i.d(t,"k",function(){return h}),i.d(t,"h",function(){return u}),i.d(t,"b",function(){return p}),i.d(t,"a",function(){return f});var n=9,o=13,s=27,r=32,l=35,a=36,c=37,h=38,u=39,p=40,f=65},mxRT:function(e,t,i){"use strict";i.d(t,"h",function(){return le}),i.d(t,"g",function(){return re}),i.d(t,"l",function(){return $}),i.d(t,"d",function(){return I}),i.d(t,"c",function(){return _}),i.d(t,"j",function(){return x}),i.d(t,"k",function(){return E}),i.d(t,"i",function(){return Q}),i.d(t,"b",function(){return G}),i.d(t,"a",function(){return U}),i.d(t,"f",function(){return X}),i.d(t,"e",function(){return L});var n=i("4c35"),o=i("mrSG"),s=i("lLAP"),r=i("YlbQ"),l=i("eDkP"),a=i("CcnG"),c=i("gIcY"),h=i("9Kf0"),u=i("VYBx"),p=i("9k2g"),f=i("l5YW"),d=i("N0SF"),g=i("K9Ia"),m=i("lYZG"),y=i("p0ib"),b=i("pugT"),v=i("F/XL"),O=i("bne5"),C=i("26FU"),w=i("t9fZ"),S=i("15JJ"),P=i("VnD/"),j=i("67Y/"),R=i("xMyE"),D=i("vubp"),M=i("Gi3i"),A=i("ad02"),T=i("p0Sj"),k=i("ny24"),E=(i("ihYY"),function(){return function(e){this.elementRef=e}}()),F=function(){return function(e,t){void 0===t&&(t=!1),this.source=e,this.isUserInput=t}}(),I=new a.r("TS_OPTION_PARENT_COMPONENT"),_=new a.r("TS_OPTGROUP_PARENT_COMPONENT"),V=0,x=function(){function e(e,t,i,n,o){this.elementRef=e,this.changeDetectorRef=t,this.ngZone=i,this.parent=n,this.group=o,this.mostRecentViewValue="",this.stateChanges=new g.a,this.title="",this.uid="ts-select-option-"+V++,this.active=!1,this.selected=!1,this._id=this.uid,this._isDisabled=!1,this.selectionChange=new a.n}return Object.defineProperty(e.prototype,"allowMultiple",{get:function(){return!(!this.parent||!this.parent.allowMultiple)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autocomplete",{get:function(){return!(!this.parent||!this.parent.autocomplete)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabIndex",{get:function(){return this.isDisabled?"-1":"0"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hostElement",{get:function(){return this.elementRef.nativeElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewValue",{get:function(){return((this.displayElementRef?this.displayElementRef.elementRef.nativeElement.textContent:this.hostElement.textContent)||"").trim()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e||this.uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDisabled",{get:function(){return this.group&&this.group.isDisabled||this._isDisabled},set:function(e){this._isDisabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"option",{get:function(){return this._option},set:function(e){this._option=e},enumerable:!0,configurable:!0}),e.prototype.ngAfterContentInit=function(){var e=this;if(this.optionTemplate&&!this.option&&Object(a.eb)())throw Error("TsSelectOptionComponent: The full 'option' object must be passed in when using a custom template.");this.ngZone.onStable.asObservable().pipe(Object(w.a)(1)).subscribe(function(){e.title=e.viewValue})},e.prototype.ngAfterViewChecked=function(){if(this.selected){var e=this.viewValue;e!==this.mostRecentViewValue&&(this.mostRecentViewValue=e,this.stateChanges.next())}},e.prototype.ngOnDestroy=function(){this.stateChanges.complete()},e.prototype.getLabel=function(){return this.viewValue},e.prototype.deselect=function(){this.selected&&(this.selected=!1,this.changeDetectorRef.markForCheck(),this.emitSelectionChangeEvent()),this.group&&this.allowMultiple&&this.group.triggerChangeDetection(this.id)},e.prototype.handleKeydown=function(e){e.keyCode!==p.d&&e.keyCode!==p.i||(this.selectViaInteraction(),e.preventDefault())},e.prototype.select=function(){this.selected||(this.selected=!0,this.changeDetectorRef.markForCheck(),this.emitSelectionChangeEvent()),this.group&&this.allowMultiple&&this.group.triggerChangeDetection(this.id)},e.prototype.selectViaInteraction=function(){this.isDisabled||(this.selected=!this.allowMultiple||!this.selected,this.changeDetectorRef.markForCheck(),this.emitSelectionChangeEvent(!0))},e.prototype.setActiveStyles=function(){this.active||(this.active=!0,this.changeDetectorRef.markForCheck())},e.prototype.setInactiveStyles=function(){var e=this;this.active&&setTimeout(function(){e.active=!1,e.changeDetectorRef.markForCheck()})},e.prototype.emitSelectionChangeEvent=function(e){void 0===e&&(e=!1),this.selectionChange.emit(new F(this,e))},e}(),Y=function(){return function(e,t){this.source=e,this.option=t}}(),K=0,L=function(){function e(e,t){this.changeDetectorRef=e,this.elementRef=t,this.showPanel=!1,this.uid="ts-select-autocomplete-"+K++,this.isOpen=!1,this.displayWith=null,this._id=this.uid,this.optionSelected=new a.n,this.opened=new a.n,this.closed=new a.n}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),e.prototype.ngAfterContentInit=function(){this.keyManager=new s.b(this.options).withWrap(),this.setVisibility()},e.prototype.emitSelectEvent=function(e){var t=new Y(this,e);this.optionSelected.emit(t)},e.prototype.getScrollTop=function(){return this.panel?this.panel.nativeElement.scrollTop:0},e.prototype.setScrollTop=function(e){this.panel&&(this.panel.nativeElement.scrollTop=e)},e.prototype.setVisibility=function(){this.showPanel=!!this.options.length,this.changeDetectorRef.markForCheck()},e}();function W(e){return!(!e||e.toArray().length<1||e.toArray().some(function(e){return!e.selected}))}function B(e,t,i){if(i.length){for(var n=t.toArray(),o=i.toArray(),s=0,r=0;r<e+1;r++)n[r].group&&n[r].group===o[s]&&s++;return s}return 0}function H(e,t,i,n){var o=e*t;return o<i?o:o+t>i+n?Math.max(0,o-n+t):i}function N(e){if(!e||e.toArray().length<1)return!1;var t=e.toArray().some(function(e){return e.selected}),i=W(e);return t&&!i}function z(e){var t,i;if(e&&!(e.toArray().length<1)){var n=e.toArray(),s=e.some(function(e){return e.selected});try{for(var r=Object(o.__values)(n),l=r.next();!l.done;l=r.next()){var a=l.value;s&&a.selected&&!a.isDisabled&&a.deselect(),s||a.selected||a.isDisabled||a.select()}}catch(c){t={error:c}}finally{try{l&&!l.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}}}var U=new a.r("mat-autocomplete-scroll-strategy");function G(e){return function(){return e.scrollStrategies.reposition()}}var q=0,X=function(){function e(e,t,i,n,s,r,l,a,c){var h=this;this.elementRef=e,this.overlay=t,this.viewContainerRef=i,this.ngZone=n,this.changeDetectorRef=s,this.documentService=r,this.viewportRuler=l,this.formField=c,this.canOpenOnNextFocus=!0,this.closeKeyEventStream=new g.a,this.componentDestroyed=!1,this.manuallyFloatingLabel=!1,this.optionSelections=Object(m.a)(function(){return h.autocompletePanel&&h.autocompletePanel.options?y.a.apply(void 0,Object(o.__spread)(h.autocompletePanel.options.map(function(e){return e.selectionChange}))):h.ngZone.onStable.asObservable().pipe(Object(w.a)(1),Object(S.a)(function(){return h.optionSelections}))}),this.overlayAttached=!1,this.viewportSubscription=b.a.EMPTY,this.uid="ts-autocomplete-trigger-"+q++,this.autocompleteAttribute="off",this._autocompleteDisabled=!1,this._reopenAfterSelection=!1,this.onChange=function(){},this.onTouched=function(){},this.windowBlurHandler=function(){h.canOpenOnNextFocus=h.document.activeElement!==h.elementRef.nativeElement||h.panelOpen},"undefined"!=typeof window&&n.runOutsideAngular(function(){window.addEventListener("blur",h.windowBlurHandler)}),this.scrollStrategy=a,this.document=this.documentService.document}return Object.defineProperty(e.prototype,"activeOption",{get:function(){return this.autocompletePanel&&this.autocompletePanel.keyManager?this.autocompletePanel.keyManager.activeItem:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panelClosingActions",{get:function(){var e=this;return Object(y.a)(this.optionSelections,this.autocompletePanel.keyManager.tabOut.pipe(Object(P.a)(function(){return e.overlayAttached})),this.closeKeyEventStream,this.getOutsideClickStream(),this.overlayRef?this.overlayRef.detachments().pipe(Object(P.a)(function(){return e.overlayAttached})):Object(v.a)()).pipe(Object(j.a)(function(e){return e instanceof F?e:null}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panelOpen",{get:function(){return this.overlayAttached&&this.autocompletePanel.showPanel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autocompleteDisabled",{get:function(){return this._autocompleteDisabled},set:function(e){!Object(h.h)(e)&&e&&Object(a.eb)()&&console.warn("TsAutocompleteTriggerDirective: \"tsAutocompleteDisabled\" value is not a boolean. String values of 'true' and 'false' will no longer be coerced to a true boolean with the next release."),this._autocompleteDisabled=Object(u.b)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reopenAfterSelection",{get:function(){return this._reopenAfterSelection},set:function(e){!Object(h.h)(e)&&e&&Object(a.eb)()&&console.warn("TsAutocompleteTriggerDirective: \"reopenAfterSelection\" value is not a boolean. String values of 'true' and 'false' will no longer be coerced to a true boolean with the next release."),this._reopenAfterSelection=Object(u.b)(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){"undefined"!=typeof window&&window.removeEventListener("blur",this.windowBlurHandler),this.viewportSubscription.unsubscribe(),this.componentDestroyed=!0,this.destroyPanel(),this.closeKeyEventStream.complete()},e.prototype.closePanel=function(e){this.resetLabel(),this.overlayAttached&&(this.panelOpen&&this.autocompletePanel.closed.emit(),this.autocompletePanel.isOpen=this.overlayAttached=!1,this.overlayRef&&this.overlayRef.hasAttached()&&(this.overlayRef.detach(),this.closingActionsSubscription.unsubscribe()),this.componentDestroyed||this.changeDetectorRef.detectChanges(),this.reopenAfterSelection&&!e&&this.openPanel())},e.prototype.handleFocus=function(){this.canOpenOnNextFocus?this.canOpen()&&(this.previousValue=this.elementRef.nativeElement.value,this.attachOverlay(),this.floatLabel(!0)):this.canOpenOnNextFocus=!0},e.prototype.handleInput=function(e){var t=e.target,i=t.value;"number"===t.type&&(i=""===i?null:parseFloat(i)),this.previousValue!==i&&this.document.activeElement===e.target&&(this.previousValue=i,this.onChange(i),this.canOpen()&&this.openPanel())},e.prototype.handleKeydown=function(e){var t=e.keyCode;if(t===p.e&&e.preventDefault(),this.activeOption&&t===p.d&&this.panelOpen)this.activeOption.selectViaInteraction(),this.resetActiveItem(),e.preventDefault();else if(this.autocompletePanel){var i=this.autocompletePanel.keyManager.activeItem,n=t===p.k||t===p.b;this.panelOpen||t===p.j?this.autocompletePanel.keyManager.onKeydown(e):n&&this.canOpen()&&this.openPanel(),(n||this.autocompletePanel.keyManager.activeItem!==i)&&this.scrollToOption()}},e.prototype.openPanel=function(){this.attachOverlay(),this.floatLabel()},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this.elementRef.nativeElement.disabled=e},e.prototype.writeValue=function(e){var t=this;Promise.resolve(null).then(function(){return t.setTriggerValue(e)})},e.prototype.attachOverlay=function(){var e=this;if(!this.autocompletePanel&&Object(a.eb)())throw Error("TsAutocompleteTriggerDirective: Attempting to open an undefined instance of `ts-autocomplete-panel`.");this.overlayRef?this.overlayRef.updateSize({width:this.getPanelWidth()}):(this.portal=new n.i(this.autocompletePanel.template,this.viewContainerRef),this.overlayRef=this.overlay.create(this.getOverlayConfig()),this.overlayRef.keydownEvents().subscribe(function(t){(t.keyCode===p.e||t.keyCode===p.k&&t.altKey)&&(e.resetActiveItem(),e.closeKeyEventStream.next())}),this.viewportSubscription=this.viewportRuler.change().subscribe(function(){e.panelOpen&&e.overlayRef&&e.overlayRef.updateSize({width:e.getPanelWidth()})})),this.overlayRef&&!this.overlayRef.hasAttached()&&(this.overlayRef.attach(this.portal),this.closingActionsSubscription=this.subscribeToClosingActions());var t=this.panelOpen;this.autocompletePanel.setVisibility(),this.autocompletePanel.isOpen=this.overlayAttached=!0,this.panelOpen&&t!==this.panelOpen&&this.autocompletePanel.opened.emit()},e.prototype.canOpen=function(){var e=this.elementRef.nativeElement;return!e.readOnly&&!e.disabled&&!this.autocompleteDisabled},e.prototype.clearPreviousSelectedOption=function(e){this.autocompletePanel.options.forEach(function(t){t!=e&&t.selected&&t.deselect()})},e.prototype.destroyPanel=function(){this.overlayRef&&(this.closePanel(),this.overlayRef.dispose(),this.overlayRef=null)},e.prototype.floatLabel=function(e){void 0===e&&(e=!1),this.formField&&"auto"===this.formField.floatLabel&&(e?this.formField.animateAndLockLabel():this.formField.floatLabel="always",this.manuallyFloatingLabel=!0)},e.prototype.getConnectedElement=function(){return this.formField?this.formField.getConnectedOverlayOrigin():this.elementRef},e.prototype.getHostWidth=function(){return this.getConnectedElement().nativeElement.getBoundingClientRect().width},e.prototype.getOverlayConfig=function(){return new l.d({positionStrategy:this.getOverlayPosition(),scrollStrategy:this.scrollStrategy(),width:this.getPanelWidth(),direction:"ltr"})},e.prototype.getOverlayPosition=function(){return this.positionStrategy=this.overlay.position().flexibleConnectedTo(this.getConnectedElement()).withFlexibleDimensions(!1).withPush(!1).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"}]),this.positionStrategy},e.prototype.getOutsideClickStream=function(){var e=this;return this.document?Object(y.a)(Object(O.a)(this.document,"click"),Object(O.a)(this.document,"touchend")).pipe(Object(P.a)(function(t){var i=t.target,n=e.formField?e.formField.elementRef.nativeElement:null;return e.overlayAttached&&i!==e.elementRef.nativeElement&&(!n||!n.contains(i))&&!!e.overlayRef&&!e.overlayRef.overlayElement.contains(i)})):Object(v.a)(null)},e.prototype.getPanelWidth=function(){return this.getHostWidth()},e.prototype.resetActiveItem=function(){this.autocompletePanel.keyManager.setActiveItem(-1)},e.prototype.resetLabel=function(){this.manuallyFloatingLabel&&(this.formField.floatLabel="auto",this.manuallyFloatingLabel=!1)},e.prototype.scrollToOption=function(){var e=this.autocompletePanel.keyManager.activeItemIndex||0,t=H(e+B(e,this.autocompletePanel.options,this.autocompletePanel.optionGroups),48,this.autocompletePanel.getScrollTop(),256);this.autocompletePanel.setScrollTop(t)},e.prototype.setTriggerValue=function(e){var t=this.autocompletePanel&&this.autocompletePanel.displayWith,i=t?t(e):e,n=null!=i?i:"";this.formField?this.formField.control.value=n:this.elementRef.nativeElement.value=n},e.prototype.setValueAndClose=function(e){this.clearPreviousSelectedOption(e.source),this.setTriggerValue(e.source.value),this.onChange(e.source.value),this.elementRef.nativeElement.focus(),this.autocompletePanel.emitSelectEvent(e.source),this.closePanel()},e.prototype.subscribeToClosingActions=function(){var e=this,t=this.ngZone.onStable.asObservable().pipe(Object(w.a)(1)),i=this.autocompletePanel.options.changes.pipe(Object(R.a)(function(){return e.positionStrategy.reapplyLastPosition()}),Object(D.a)(0));return Object(y.a)(t,i).pipe(Object(S.a)(function(){return e.resetActiveItem(),e.autocompletePanel.setVisibility(),e.panelClosingActions}),Object(w.a)(1)).subscribe(function(t){t&&t.source&&void 0!==t.source.value&&e.setValueAndClose(t)})},e}(),Z=0,Q=function(){function e(e,t,i){this.changeDetectorRef=e,this.elementRef=t,this.parent=i,this.allSelected=!1,this.labelId="ts-select-optgroup-label-"+Z++,this.someSelected=!1,this.uid="ts-select-optgroup-"+Z++,this._id=this.uid,this.isDisabled=!1}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e||this.uid},enumerable:!0,configurable:!0}),e.prototype.toggle=function(){!this.isDisabled&&this.parent.allowMultiple&&z(this.optgroupOptions)},e.prototype.triggerChangeDetection=function(){this.allSelected=W(this.optgroupOptions),this.someSelected=N(this.optgroupOptions),this.changeDetectorRef.detectChanges()},e}(),J=0,$=function(){function e(){this.uid="ts-select-trigger-"+J++,this._id=this.uid}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e||this.uid},enumerable:!0,configurable:!0}),e}(),ee=2,te=200,ie=",",ne=function(e,t){return e===t},oe=function(){return function(e,t){this.source=e,this.value=t}}(),se=0,re=function(){function e(e,t,i,n,s,r){var l=this;this.viewportRuler=e,this.changeDetectorRef=t,this.ngZone=i,this.documentService=n,this.elementRef=s,this.ngControl=r,this.autocompleteFormControl=new c.i([]),this.autocompleteSelections=[],this.flexGap=f.a.small[0],this.labelChanges=new g.a,this.offsetY=0,this.optionIds="",this.optionSelectionChanges=Object(m.a)(function(){return y.a.apply(void 0,Object(o.__spread)(l.options.map(function(e){return e.selectionChange})))}),this.panelDoneAnimatingStream=new g.a,this.panelOpen=!1,this.positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}],this.scrollTop=0,this.searchQuery="",this.selfReference=this,this.stateChanges=new g.a,this.transformOrigin="top",this.triggerFontSize=0,this.uid="ts-select-"+se++,this.querySubject=new C.a(""),this.viewportMarginSpacing=100,this.allowMultiple=!1,this.autocomplete=!1,this.autocompleteAllowDuplicateSelections=!1,this.autocompleteReopenAfterSelection=!1,this._compareWith=ne,this._debounceDelay=te,this._delimiter=ie,this.hideRequiredMarker=!1,this._id=this.uid,this.isDisabled=!1,this.isFilterable=!1,this._isRequired=!1,this._minimumCharacters=ee,this.showProgress=!1,this._tabIndex=0,this.theme="primary",this.validateOnChange=!1,this.closed=new a.n,this.duplicateSelection=new a.n,this.opened=new a.n,this.optionDeselected=new a.n,this.optionSelected=new a.n,this.queryChange=new a.n,this.selectionChange=new a.n,this.valueChange=new a.n,this.onChange=function(){},this.onTouched=function(){},this.document=this.documentService.document,this.ngControl&&(this.ngControl.valueAccessor=this)}return Object.defineProperty(e.prototype,"allOptionsSelected",{get:function(){return W(this.options)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return!this.autocomplete&&this.selectionModel&&this.selectionModel.isEmpty()||this.autocomplete&&!this.autocompleteFormControl.value.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focused",{get:function(){return this.document.activeElement===(this.inputElement&&this.inputElement.nativeElement)||this.panelOpen},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemCount",{get:function(){return this.options.length+this.optionGroups.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemHeight",{get:function(){var e=this.options.toArray();return(e[1]||e[0]).elementRef.nativeElement.offsetHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"someOptionsSelected",{get:function(){return N(this.options)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldLabelFloat",{get:function(){return this.focused||!this.empty||this.searchQuery.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectTriggerValue",{get:function(){return this.allowMultiple?this.selectionModel.selected.map(function(e){return e.viewValue}).join(this.delimiter+" "):this.autocomplete?this.autocompleteFormControl.value:this.selectionModel.selected[0].viewValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this.allowMultiple?this.selectionModel.selected:this.selectionModel.selected[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chipFormatUIFn",{get:function(){return this._chipFormatUIFn},set:function(e){if(e)if(Object(h.i)(e))this._chipFormatUIFn=e;else if(Object(a.eb)())throw Error("TsSelectComponent: 'chipFormatUIFn' must be passed a 'TsSelectFormatFn'.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"compareWith",{get:function(){return this._compareWith},set:function(e){"function"!=typeof e&&Object(a.eb)()&&(console.warn('TsSelectComponent: "compareWith" must be a function. Falling back to the default.'),this._compareWith=ne),this._compareWith=e,this.selectionModel&&this.initializeSelection()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"debounceDelay",{get:function(){return this._debounceDelay},set:function(e){this._debounceDelay=Object(u.c)(e,te)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delimiter",{get:function(){return this._delimiter},set:function(e){this._delimiter=Object(h.k)(e)?e:ie},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hint",{get:function(){return this._hint},set:function(e){this._hint=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e||this.uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRequired",{get:function(){var e=this.ngControl&&this.ngControl.control,t=!!e&&Object(h.g)(e);return this._isRequired||t},set:function(e){this._isRequired=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(e){this._label=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minimumCharacters",{get:function(){return this._minimumCharacters},set:function(e){this._minimumCharacters=Object(u.c)(e,ee)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){this._placeholder=e,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabIndex",{get:function(){return this._tabIndex},set:function(e){this._tabIndex=Object(u.c)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){e!==this._value&&(this._value=e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.selectionModel=new r.c(this.allowMultiple),this.ngControl&&this.ngControl.form?(this.autocomplete&&this.ngControl.value&&(this.autocompleteFormControl.setValue(this.ngControl.value),this.autocompleteSelections=this.ngControl.value),this.ngControl.valueChanges&&this.ngControl.valueChanges.pipe(Object(h.n)(this)).subscribe(function(t){t&&(e.autocomplete?(e.autocompleteFormControl.setValue(t,{emitEvent:!1}),e.autocompleteSelections=e.ngControl.value):e.setSelectionByValue(t))})):setTimeout(function(){e.autocomplete&&e.ngControl&&e.ngControl.value&&(e.autocompleteFormControl.setValue(e.ngControl.value),e.autocompleteSelections=e.ngControl.value)}),this.querySubject.pipe(Object(h.n)(this),Object(M.a)(this.debounceDelay),Object(S.a)(function(t){return Object(v.a)(t&&t.length>=e.minimumCharacters?t:"")}),Object(A.a)()).subscribe(function(t){var i=e.inputElement.nativeElement.value;e.queryChange.emit(t===i||""===t?t:i)}),this.autocompleteFormControl.valueChanges.pipe(Object(h.n)(this)).subscribe(function(t){e.propagateChanges(t)})},e.prototype.ngAfterContentInit=function(){var e=this;this.initKeyManager(),this.selectionModel.onChange.pipe(Object(h.n)(this)).subscribe(function(t){t.added.forEach(function(t){t.select(),e.optionSelected.emit(new oe(e,t.value))}),t.removed.forEach(function(t){t.deselect(),e.optionDeselected.emit(new oe(e,t.value))})}),this.options.changes.pipe(Object(T.a)(null),Object(P.a)(function(){return!e.autocomplete}),Object(h.n)(this)).subscribe(function(){e.resetOptions(),e.initializeSelection()})},e.prototype.ngOnChanges=function(e){Object(d.c)(e,"label")&&!e.label.firstChange&&(this.changeDetectorRef.detectChanges(),this.labelChanges.next())},e.prototype.ngOnDestroy=function(){this.stateChanges.complete()},e.prototype.toggle=function(){this.isDisabled||(this.panelOpen?this.close():this.open())},e.prototype.open=function(){var e=this;!this.isDisabled&&this.options&&this.options.length&&!this.panelOpen&&(this.triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this.triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement)["font-size"],10),this.panelOpen=!0,this.keyManager.withHorizontalOrientation(null),this.highlightCorrectOption(),this.changeDetectorRef.markForCheck(),this.ngZone.onStable.asObservable().pipe(Object(w.a)(1)).subscribe(function(){e.autocomplete||e.triggerFontSize&&e.overlayDir.overlayRef&&e.overlayDir.overlayRef.overlayElement&&(e.overlayDir.overlayRef.overlayElement.style.fontSize=e.triggerFontSize+"px"),e.optionRect=e.options.first.elementRef.nativeElement.getBoundingClientRect(),e.calculateOverlayPosition()}),this.opened.emit())},e.prototype.close=function(){this.panelOpen&&(this.panelOpen=!1,this.keyManager.withHorizontalOrientation("ltr"),this.changeDetectorRef.markForCheck(),this.onTouched(),this.updateValueAndValidity(),this.closed.emit())},e.prototype.onAttached=function(){var e=this;this.overlayDir.positionChange.pipe(Object(w.a)(1)).subscribe(function(){e.changeDetectorRef.detectChanges(),e.setPanelScrollTop(e.scrollTop)})},e.prototype.handleKeydown=function(e){this.isDisabled||(this.panelOpen?this.handleOpenKeydown(e):this.handleClosedKeydown(e))},e.prototype.handleClosedKeydown=function(e){var t=e.keyCode,i=[p.b,p.k,p.g,p.h].some(function(e){return e===t});t===p.d||t===p.i||(this.allowMultiple||e.altKey)&&i?(e.preventDefault(),this.open()):this.allowMultiple||this.keyManager.onKeydown(e)},e.prototype.handleOpenKeydown=function(e){var t=e.keyCode,i=t===p.b||t===p.k,n=this.keyManager,o=this.isFilterable&&"input"===e.target.tagName.toLowerCase();if(t===p.f||t===p.c)e.preventDefault(),t===p.f?n.setFirstItemActive():n.setLastItemActive();else if(i&&e.altKey)e.preventDefault(),this.close();else if((t===p.d||t===p.i&&!o)&&n.activeItem)e.preventDefault(),n.activeItem.selectViaInteraction();else if(this.allowMultiple&&t===p.a&&e.ctrlKey){e.preventDefault();var s=this.options.some(function(e){return!e.isDisabled&&!e.selected});this.options.forEach(function(e){e.isDisabled||(s?e.select():e.deselect())})}else{var r=this.allowMultiple&&i&&e.shiftKey;i&&e.shiftKey?t===p.b?n.setNextItemActive():n.setPreviousItemActive():n.onKeydown(e),r&&n.activeItem&&n.activeItem.selectViaInteraction()}},e.prototype.resetOptions=function(){var e=this;this.optionSelectionChanges.pipe(Object(k.a)(this.options.changes),Object(h.n)(this)).subscribe(function(t){e.autocomplete||e.onSelect(t.source,t.isUserInput),t.isUserInput&&!e.allowMultiple&&e.panelOpen&&(e.close(),e.focus())}),y.a.apply(void 0,Object(o.__spread)(this.options.map(function(e){return e.stateChanges}))).pipe(Object(h.n)(this)).subscribe(function(){e.changeDetectorRef.markForCheck(),e.stateChanges.next()}),this.setOptionIds()},e.prototype.onSelect=function(e,t){var i=this.selectionModel.isSelected(e);null!=e.value||this.allowMultiple?(e.selected?this.selectionModel.select(e):this.selectionModel.deselect(e),t&&this.keyManager.setActiveItem(e),this.allowMultiple&&(this.sortValues(),t&&this.focus())):(e.deselect(),this.selectionModel.clear(),this.propagateChanges(e.value)),i!==this.selectionModel.isSelected(e)&&this.propagateChanges(),this.stateChanges.next()},e.prototype.setOptionIds=function(){this.optionIds=this.options.map(function(e){return e.id}).join(" ")},e.prototype.initKeyManager=function(){var e=this;this.keyManager=this.autocomplete?new s.b(this.options).withTypeAhead().withVerticalOrientation().withHorizontalOrientation("ltr").withWrap():new s.b(this.options).withTypeAhead().withVerticalOrientation().withHorizontalOrientation("ltr"),this.keyManager.tabOut.pipe(Object(h.n)(this)).subscribe(function(){e.focus(),e.close()}),this.keyManager.change.pipe(Object(h.n)(this)).subscribe(function(){e.panelOpen&&e.panel?e.scrollActiveOptionIntoView():e.panelOpen||e.allowMultiple||!e.keyManager.activeItem||e.keyManager.activeItem.selectViaInteraction()})},e.prototype.focus=function(){this.autocomplete?this.inputElement.nativeElement.focus():this.elementRef.nativeElement.focus()},e.prototype.sortValues=function(){var e=this;if(this.allowMultiple){var t=this.options.toArray();this.selectionModel.sort(function(i,n){return e.sortComparator?e.sortComparator(i,n,t):t.indexOf(i)-t.indexOf(n)}),this.stateChanges.next()}},e.prototype.propagateChanges=function(e){var t;t=this.autocomplete?this.autocompleteFormControl.value:this.allowMultiple?this.selected.map(function(e){return e.value}):this.selected?this.selected.value:e,this.value=t,this.valueChange.emit(t),this.onChange(t),this.selectionChange.emit(new oe(this,t)),this.changeDetectorRef.markForCheck()},e.prototype.updateValueAndValidity=function(){this.ngControl&&this.ngControl.control&&this.ngControl.control.updateValueAndValidity()},e.prototype.writeValue=function(e){},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this.isDisabled=e,this.changeDetectorRef.markForCheck(),this.stateChanges.next()},e.prototype.initializeSelection=function(){var e=this;Promise.resolve().then(function(){e.setSelectionByValue(e.ngControl?e.ngControl.value:e.value)})},e.prototype.setSelectionByValue=function(e){var t=this;if(this.allowMultiple&&e)e=Object(u.a)(e),this.selectionModel.clear(),e.forEach(function(e){return t.selectOptionByValue(e)}),this.sortValues();else{this.selectionModel.clear();var i=this.selectOptionByValue(e);i&&this.keyManager.setActiveItem(i)}this.changeDetectorRef.markForCheck()},e.prototype.selectOptionByValue=function(e){var t=this,i=this.options.find(function(i){try{return null!=i.value&&t.compareWith(i.value,e)}catch(n){return Object(a.eb)()&&console.warn(n),!1}});return i&&this.selectionModel.select(i),i},e.prototype.scrollActiveOptionIntoView=function(){var e=this.keyManager.activeItemIndex||0,t=H(e+B(e,this.options,this.optionGroups),this.itemHeight,this.getPanelScrollTop(),256);this.setPanelScrollTop(t)},e.prototype.calculateOverlayPosition=function(){if(!this.autocomplete){var e=this.itemHeight,t=this.itemCount,i=Math.min(t*e,256),n=t*e-i,o=this.empty?0:this.getOptionIndex(this.selectionModel.selected[0]);o+=B(o,this.options,this.optionGroups);var s=i/2;this.scrollTop=this.calculateOverlayScroll(o,s,n),this.offsetY=this.calculateOverlayOffsetY(o,s,n),this.checkOverlayWithinViewport(n)}},e.prototype.calculateOverlayScroll=function(e,t,i){var n=this.itemHeight;return Math.min(Math.max(0,n*e-t+n/2),i)},e.prototype.calculateOverlayOffsetY=function(e,t,i){var n=this.itemHeight,o=(n-(this.triggerRect?this.triggerRect.height:0))/2,s=Math.floor(256/n);return Math.round(-1*(0===this.scrollTop?e*n:this.scrollTop===i?(e-(this.itemCount-s))*n+(n-(this.itemCount*n-256)%n):t-n/2)-o)},e.prototype.checkOverlayWithinViewport=function(e){var t=this.itemHeight,i=this.viewportRuler.getViewportSize(),n=this.triggerRect?this.triggerRect.top-8:0,o=i.height-(this.triggerRect?this.triggerRect.bottom:0)-8,s=Math.abs(this.offsetY),r=Math.min(this.itemCount*t,256)-s-(this.triggerRect?this.triggerRect.height:0);r>o?this.adjustPanelUp(r,o):s>n?this.adjustPanelDown(s,n,e):this.transformOrigin=this.getOriginBasedOnOption()},e.prototype.adjustPanelUp=function(e,t){var i=Math.round(e-t);this.scrollTop-=i,this.offsetY=this.offsetY-i<0?0:this.offsetY-i,this.transformOrigin=this.getOriginBasedOnOption(),this.scrollTop<=0&&(this.scrollTop=0,this.offsetY=0,this.transformOrigin="50% bottom 0px")},e.prototype.adjustPanelDown=function(e,t,i){var n=Math.round(e-t);if(this.scrollTop+=n,this.offsetY=this.offsetY+n<0?0:this.offsetY+n,this.transformOrigin=this.getOriginBasedOnOption(),this.scrollTop>=i)return this.scrollTop=i,this.offsetY=0,void(this.transformOrigin="50% top 0px")},e.prototype.getOriginBasedOnOption=function(){var e=this.itemHeight,t=(e-(this.triggerRect?this.triggerRect.height:0))/2;return"50% "+(Math.abs(this.offsetY)-t+e/2)+"px 0px"},e.prototype.getOptionIndex=function(e){return this.options.reduce(function(t,i,n){return void 0===t?e===i?n:void 0:t},void 0)},e.prototype.highlightCorrectOption=function(){this.keyManager&&(this.empty?this.keyManager.setFirstItemActive():this.keyManager.setActiveItem(this.selectionModel.selected[0]))},e.prototype.toggleAllOptions=function(){z(this.options)},e.prototype.onContainerClick=function(){this.focus(),this.autocomplete||this.isDisabled||this.open()},e.prototype.getPanelScrollTop=function(){return this.panel?this.panel.nativeElement.scrollTop:0},e.prototype.setPanelScrollTop=function(e){this.panel&&(this.panel.nativeElement.scrollTop=e)},e.prototype.handleInputBlur=function(e){var t=!(!e||!e.relatedTarget);t&&t&&e.relatedTarget.nodeName?"TS-SELECT-OPTION"!==e.relatedTarget.nodeName&&this.resetAutocompleteQuery():this.autocompleteTrigger.panelOpen&&this.autocompleteTrigger.closePanel(!0),this.onTouched(),this.updateValueAndValidity()},e.prototype.resetAutocompleteQuery=function(){this.keyManager.updateActiveItem(-1),this.inputElement.nativeElement.value=""},e.prototype.autocompleteSelectItem=function(e){var t=this.autocompleteSelections.indexOf(e.option.value)>=0;if(t&&this.duplicateSelection.emit(e.option.value),this.autocompleteAllowDuplicateSelections||!t){if(this.allowMultiple){this.autocompleteReopenAfterSelection||this.resetAutocompleteQuery();var i=this.autocompleteSelections.slice();i.push(e.option.value),this.autocompleteSelections=i,this.autocompleteFormControl.setValue(this.autocompleteSelections.slice())}else{this.autocompleteSelections=[e.option.value],this.autocompleteFormControl.setValue(this.autocompleteSelections.slice());var n=this.chipFormatUIFn?this.retrieveValue(this.autocompleteFormControl.value[0],this.chipFormatUIFn):this.autocompleteFormControl.value[0];this.inputElement.nativeElement.value=n}this.autocompleteTrigger.overlayRef&&(this.autocompleteTrigger.overlayRef.updatePosition(),this.changeDetectorRef.detectChanges()),this.optionSelected.emit(new oe(this,e.option.value)),this.selectionChange.emit(new oe(this,this.autocompleteSelections))}},e.prototype.autocompleteDeselectItem=function(e){var t=this,i=this.autocompleteSelections.indexOf(e),n=this.autocompleteSelections.slice();i<0||(n.splice(i,1),this.autocompleteSelections=n,this.autocompleteFormControl.setValue(this.autocompleteSelections.slice()),this.autocompleteSelections.length<1&&this.focus(),setTimeout(function(){t.autocompleteTrigger.overlayRef&&t.autocompleteTrigger.overlayRef.updatePosition()}),this.optionDeselected.emit(new oe(this,e)),this.selectionChange.emit(new oe(this,this.autocompleteSelections.slice())))},e.prototype.retrieveValue=function(e,t){return t&&t(e)?t(e):e},e}(),le=function(){return function(){}}()}}]);