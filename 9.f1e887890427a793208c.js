(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{mxRT:function(e,t,i){"use strict";i.d(t,"a",function(){return I}),i.d(t,"b",function(){return P}),i.d(t,"c",function(){return w});var n=i("mrSG"),o=i("CcnG"),s=i("rK0N"),r=i("lLAP"),l=i("YlbQ"),a=i("VYBx"),h=i("9k2g"),c=i("e+qR"),p=i("6jrj"),u=i("l5YW"),f=i("N0SF"),g=i("K9Ia"),d=i("lYZG"),y=i("p0ib"),b=i("26FU"),m=i("p0Sj"),O=i("t9fZ"),v=i("ny24"),C=(i("ihYY"),0),w=function(){function e(){this.uid="ts-select-trigger-"+C++,this._id=this.uid}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e||this.uid},enumerable:!0,configurable:!0}),e}(),M=",",R=function(e,t){return e===t},j=function(){return function(e,t){this.source=e,this.value=t}}(),S=0,_=100,I=function(){function e(e,t,i,s,r,l){var a=this;this.viewportRuler=e,this.changeDetectorRef=t,this.ngZone=i,this.documentService=s,this.elementRef=r,this.ngControl=l,this.componentName="TsSelectComponent",this.flexGap=u.a.small[0],this.labelChanges=new g.a,this.offsetY=0,this.optionIds="",this.optionSelectionChanges=Object(d.a)(function(){return y.a.apply(void 0,Object(n.__spread)(a.options.map(function(e){return e.selectionChange})))}),this.panelDoneAnimatingStream=new g.a,this.panelOpen=!1,this.positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}],this.scrollTop=0,this.searchQuery="",this.selfReference=this,this.stateChanges=new g.a,this.transformOrigin="top",this.triggerFontSize=0,this.uid="ts-select-"+S++,this.querySubject=new b.a(""),this.viewportMarginSpacing=_,this.allowMultiple=!1,this._compareWith=R,this._delimiter=M,this.hideRequiredMarker=!1,this._id=this.uid,this.isDisabled=!1,this.isFilterable=!1,this._isRequired=!1,this.showProgress=!1,this.showRefineSearchMessage=!1,this.showRefresh=!1,this._tabIndex=0,this.theme="primary",this.validateOnChange=!1,this.closed=new o.n,this.duplicateSelection=new o.n,this.opened=new o.n,this.optionDeselected=new o.n,this.optionSelected=new o.n,this.optionsRefreshRequested=new o.n,this.queryChange=new o.n,this.selectionChange=new o.n,this.valueChange=new o.n,this.onChange=function(){},this.onTouched=function(){},this.document=this.documentService.document,this.ngControl&&(this.ngControl.valueAccessor=this)}return Object.defineProperty(e.prototype,"allOptionsSelected",{get:function(){return Object(s.h)(this.options)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.selectionModel&&this.selectionModel.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focused",{get:function(){return this.document.activeElement===(this.inputElement&&this.inputElement.nativeElement)||this.panelOpen},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemCount",{get:function(){return this.options.length+this.optionGroups.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemHeight",{get:function(){var e=this.options.toArray();return(e[1]||e[0]).elementRef.nativeElement.offsetHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"someOptionsSelected",{get:function(){return Object(s.k)(this.options)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldLabelFloat",{get:function(){return this.focused||!this.empty||this.searchQuery.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectTriggerValue",{get:function(){return this.allowMultiple?this.selectionModel.selected.map(function(e){return e.viewValue}).join(this.delimiter+" "):this.selectionModel.selected[0].viewValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this.allowMultiple?this.selectionModel.selected:this.selectionModel.selected[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"compareWith",{get:function(){return this._compareWith},set:function(e){"function"!=typeof e&&Object(o.Z)()&&(console.warn('TsSelectComponent: "compareWith" must be a function. Falling back to the default.'),this._compareWith=R),this._compareWith=e,this.selectionModel&&this.initializeSelection()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delimiter",{get:function(){return this._delimiter},set:function(e){this._delimiter=Object(c.h)(e)?e:M},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hint",{get:function(){return this._hint},set:function(e){this._hint=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e||this.uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRequired",{get:function(){var e=this.ngControl&&this.ngControl.control,t=!!e&&Object(p.d)(e);return this._isRequired||t},set:function(e){this._isRequired=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(e){this._label=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){this._placeholder=e,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabIndex",{get:function(){return this._tabIndex},set:function(e){this._tabIndex=Object(a.d)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){e!==this._value&&(this._value=e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.selectionModel=new l.b(this.allowMultiple),this.ngControl&&this.ngControl.form&&this.ngControl.valueChanges&&this.ngControl.valueChanges.pipe(Object(p.h)(this)).subscribe(function(t){t&&e.setSelectionByValue(t)})},e.prototype.ngAfterContentInit=function(){var e=this;this.initKeyManager(),this.selectionModel.changed.pipe(Object(p.h)(this)).subscribe(function(t){t.added.forEach(function(t){t.select(),e.optionSelected.emit(new j(e,t.value))}),t.removed.forEach(function(t){t.deselect(),e.optionDeselected.emit(new j(e,t.value))})}),this.options.changes.pipe(Object(m.a)(null),Object(p.h)(this)).subscribe(function(){e.resetOptions(),e.initializeSelection()})},e.prototype.ngOnChanges=function(e){Object(f.c)(e,"label")&&!e.label.firstChange&&(this.changeDetectorRef.detectChanges(),this.labelChanges.next())},e.prototype.ngOnDestroy=function(){this.stateChanges.complete()},e.prototype.toggle=function(){this.isDisabled||(this.panelOpen?this.close():this.open())},e.prototype.open=function(){var e=this;!this.isDisabled&&this.options&&this.options.length&&!this.panelOpen&&(this.triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this.triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement)["font-size"],10),this.panelOpen=!0,this.keyManager.withHorizontalOrientation(null),this.highlightCorrectOption(),this.changeDetectorRef.markForCheck(),this.ngZone.onStable.asObservable().pipe(Object(O.a)(1)).subscribe(function(){e.triggerFontSize&&e.overlayDir.overlayRef&&e.overlayDir.overlayRef.overlayElement&&(e.overlayDir.overlayRef.overlayElement.style.fontSize=e.triggerFontSize+"px"),e.optionRect=e.options.first.elementRef.nativeElement.getBoundingClientRect(),e.calculateOverlayPosition()}),this.opened.emit())},e.prototype.close=function(){this.panelOpen&&(this.panelOpen=!1,this.keyManager.withHorizontalOrientation("ltr"),this.changeDetectorRef.markForCheck(),this.onTouched(),this.updateValueAndValidity(),this.closed.emit())},e.prototype.onAttached=function(){var e=this;this.overlayDir.positionChange.pipe(Object(O.a)(1)).subscribe(function(){e.changeDetectorRef.detectChanges(),e.setPanelScrollTop(e.scrollTop)})},e.prototype.handleKeydown=function(e){this.isDisabled||(this.panelOpen?this.handleOpenKeydown(e):this.handleClosedKeydown(e))},e.prototype.handleClosedKeydown=function(e){var t=e.code,i=[h.a.DOWN_ARROW.code,h.a.UP_ARROW.code,h.a.LEFT_ARROW.code,h.a.RIGHT_ARROW.code].indexOf(t)>=0;t===h.a.ENTER.code||t===h.a.SPACE.code||(this.allowMultiple||e.altKey)&&i?(e.preventDefault(),this.open()):this.allowMultiple||this.keyManager.onKeydown(e)},e.prototype.handleOpenKeydown=function(e){var t=e.code,i=t===h.a.DOWN_ARROW.code||t===h.a.UP_ARROW.code,n=this.keyManager,o=this.isFilterable&&"input"===e.target.tagName.toLowerCase();if(t===h.a.HOME.code||t===h.a.END.code)e.preventDefault(),t===h.a.HOME.code?n.setFirstItemActive():n.setLastItemActive();else if(i&&e.altKey)e.preventDefault(),this.close();else if((t===h.a.ENTER.code||t===h.a.SPACE.code&&!o)&&n.activeItem)e.preventDefault(),n.activeItem.selectViaInteraction();else if(this.allowMultiple&&t===h.a.A.code&&e.ctrlKey){e.preventDefault();var s=this.options.some(function(e){return!e.isDisabled&&!e.selected});this.options.forEach(function(e){e.isDisabled||(s?e.select():e.deselect())})}else{var r=this.allowMultiple&&i&&e.shiftKey;i&&e.shiftKey?t===h.a.DOWN_ARROW.code?n.setNextItemActive():n.setPreviousItemActive():n.onKeydown(e),r&&n.activeItem&&n.activeItem.selectViaInteraction()}},e.prototype.resetOptions=function(){var e=this;this.optionSelectionChanges.pipe(Object(v.a)(this.options.changes),Object(p.h)(this)).subscribe(function(t){e.onSelect(t.source,t.isUserInput),t.isUserInput&&!e.allowMultiple&&e.panelOpen&&(e.close(),e.focus())}),y.a.apply(void 0,Object(n.__spread)(this.options.map(function(e){return e.stateChanges}))).pipe(Object(p.h)(this)).subscribe(function(){e.changeDetectorRef.markForCheck(),e.stateChanges.next()}),this.setOptionIds()},e.prototype.onSelect=function(e,t){var i=this.selectionModel.isSelected(e);null!=e.value||this.allowMultiple?(e.selected?this.selectionModel.select(e):this.selectionModel.deselect(e),t&&this.keyManager.setActiveItem(e),this.allowMultiple&&(this.sortValues(),t&&this.focus())):(e.deselect(),this.selectionModel.clear(),this.propagateChanges(e.value)),i!==this.selectionModel.isSelected(e)&&this.propagateChanges(),this.stateChanges.next()},e.prototype.setOptionIds=function(){this.optionIds=this.options.map(function(e){return e.id}).join(" ")},e.prototype.initKeyManager=function(){var e=this;this.keyManager=new r.b(this.options).withTypeAhead().withVerticalOrientation().withHorizontalOrientation("ltr"),this.keyManager.tabOut.pipe(Object(p.h)(this)).subscribe(function(){e.focus(),e.close()}),this.keyManager.change.pipe(Object(p.h)(this)).subscribe(function(){e.panelOpen&&e.panel?e.scrollActiveOptionIntoView():e.panelOpen||e.allowMultiple||!e.keyManager.activeItem||e.keyManager.activeItem.selectViaInteraction()})},e.prototype.focus=function(){this.elementRef.nativeElement.focus()},e.prototype.sortValues=function(){var e=this;if(this.allowMultiple){var t=this.options.toArray();this.selectionModel.sort(function(i,n){return e.sortComparator?e.sortComparator(i,n,t):t.indexOf(i)-t.indexOf(n)}),this.stateChanges.next()}},e.prototype.propagateChanges=function(e){var t;t=this.allowMultiple?this.selected.map(function(e){return e.value}):this.selected?this.selected.value:e,this.value=t,this.valueChange.emit(t),this.onChange(t),this.selectionChange.emit(new j(this,t)),this.changeDetectorRef.markForCheck()},e.prototype.updateValueAndValidity=function(){this.ngControl&&this.ngControl.control&&this.ngControl.control.updateValueAndValidity()},e.prototype.writeValue=function(e){},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this.isDisabled=e,this.changeDetectorRef.markForCheck(),this.stateChanges.next()},e.prototype.initializeSelection=function(){var e=this;Promise.resolve().then(function(){e.setSelectionByValue(e.ngControl?e.ngControl.value:e.value)})},e.prototype.setSelectionByValue=function(e){var t=this;if(this.allowMultiple&&e)e=Object(a.a)(e),this.selectionModel.clear(),e.forEach(function(e){return t.selectOptionByValue(e)}),this.sortValues();else{this.selectionModel.clear();var i=this.selectOptionByValue(e);i&&this.keyManager.setActiveItem(i)}this.changeDetectorRef.markForCheck()},e.prototype.selectOptionByValue=function(e){var t=this,i=this.options.find(function(i){try{return null!=i.value&&t.compareWith(i.value,e)}catch(n){return Object(o.Z)()&&console.warn(n),!1}});return i&&this.selectionModel.select(i),i},e.prototype.scrollActiveOptionIntoView=function(){var e=this.keyManager.activeItemIndex||0,t=Object(s.i)(e,this.options,this.optionGroups),i=Object(s.j)(e+t,this.itemHeight,this.getPanelScrollTop(),256);this.setPanelScrollTop(i)},e.prototype.calculateOverlayPosition=function(){var e=this.itemHeight,t=this.itemCount,i=Math.min(t*e,256),n=t*e-i,o=this.empty?0:this.getOptionIndex(this.selectionModel.selected[0]);o+=Object(s.i)(o,this.options,this.optionGroups);var r=i/2;this.scrollTop=this.calculateOverlayScroll(o,r,n),this.offsetY=this.calculateOverlayOffsetY(o,r,n),this.checkOverlayWithinViewport(n)},e.prototype.calculateOverlayScroll=function(e,t,i){var n=this.itemHeight;return Math.min(Math.max(0,n*e-t+n/2),i)},e.prototype.calculateOverlayOffsetY=function(e,t,i){var n=this.itemHeight,o=(n-(this.triggerRect?this.triggerRect.height:0))/2,s=Math.floor(256/n);return Math.round(-1*(0===this.scrollTop?e*n:this.scrollTop===i?(e-(this.itemCount-s))*n+(n-(this.itemCount*n-256)%n):t-n/2)-o)},e.prototype.checkOverlayWithinViewport=function(e){var t=this.itemHeight,i=this.viewportRuler.getViewportSize(),n=this.triggerRect?this.triggerRect.top-8:0,o=i.height-(this.triggerRect?this.triggerRect.bottom:0)-8,s=Math.abs(this.offsetY),r=Math.min(this.itemCount*t,256)-s-(this.triggerRect?this.triggerRect.height:0);r>o?this.adjustPanelUp(r,o):s>n?this.adjustPanelDown(s,n,e):this.transformOrigin=this.getOriginBasedOnOption()},e.prototype.adjustPanelUp=function(e,t){var i=Math.round(e-t);this.scrollTop-=i,this.offsetY=this.offsetY-i<0?0:this.offsetY-i,this.transformOrigin=this.getOriginBasedOnOption(),this.scrollTop<=0&&(this.scrollTop=0,this.offsetY=0,this.transformOrigin="50% bottom 0px")},e.prototype.adjustPanelDown=function(e,t,i){var n=Math.round(e-t);if(this.scrollTop+=n,this.offsetY=this.offsetY+n<0?0:this.offsetY+n,this.transformOrigin=this.getOriginBasedOnOption(),this.scrollTop>=i)return this.scrollTop=i,this.offsetY=0,void(this.transformOrigin="50% top 0px")},e.prototype.getOriginBasedOnOption=function(){var e=this.itemHeight,t=(e-(this.triggerRect?this.triggerRect.height:0))/2;return"50% "+(Math.abs(this.offsetY)-t+e/2)+"px 0px"},e.prototype.getOptionIndex=function(e){return this.options.reduce(function(t,i,n){var o=e===i?n:void 0;return Object(c.i)(t)?o:t},void 0)},e.prototype.highlightCorrectOption=function(){this.keyManager&&(this.empty?this.keyManager.setFirstItemActive():this.keyManager.setActiveItem(this.selectionModel.selected[0]))},e.prototype.toggleAllOptions=function(){Object(s.l)(this.options)},e.prototype.onContainerClick=function(){this.focus(),this.isDisabled||this.open()},e.prototype.getPanelScrollTop=function(){return this.panel?this.panel.nativeElement.scrollTop:0},e.prototype.setPanelScrollTop=function(e){this.panel&&(this.panel.nativeElement.scrollTop=e)},e}(),P=function(){return function(){}}()}}]);